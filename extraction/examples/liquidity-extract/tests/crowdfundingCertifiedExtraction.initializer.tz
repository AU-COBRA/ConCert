parameter %default (pair timestamp (pair mutez address));
storage (pair (pair timestamp (pair mutez address)) (pair (map address mutez) bool));
code { DUP ;
       DIP { CDR @_storage } ;
       CAR @_parameter ;
       DUP ;
       LAMBDA @fst
         (pair mutez mutez)
         mutez
         { RENAME @p_slash_161 ; DUP @p ; CAR ; DIP { DROP } } ;
       LAMBDA @snd__2_
         (pair timestamp (pair address (pair mutez mutez)))
         (pair address (pair mutez mutez))
         { RENAME @p_slash_163 ; DUP @p ; CDR ; DIP { DROP } } ;
       LAMBDA @snd
         (pair address (pair mutez mutez))
         (pair mutez mutez)
         { RENAME @p_slash_165 ; DUP @p ; CDR ; DIP { DROP } } ;
       LAMBDA @eqTez
         (pair mutez mutez)
         bool
         { RENAME @a_b_slash_167 ;
           DUP @a_b ;
           CAR @a ;
           { DIP { DUP @a_b } ; SWAP } ;
           CDR @b ;
           DUP @b ;
           { DIP 2 { DUP @a } ; DIG 2 } ;
           COMPARE ;
           EQ ;
           DIP { DROP } ;
           DIP { DROP } ;
           DIP { DROP } } ;
       { DIP 2 { DUP @snd__2_ } ; DIG 2 } ;
       { DIP 2 { DUP @snd } ; DIG 2 } ;
       PAIR ;
       { DIP 4 { DUP @fst } ; DIG 4 } ;
       PAIR ;
       { DIP { DUP @eqTez } ; SWAP } ;
       PAIR ;
       LAMBDA
         (pair (pair (pair timestamp (pair address (pair mutez mutez)))
                     (pair timestamp (pair mutez address)))
               (pair (lambda (pair mutez mutez) bool)
                     (pair (lambda (pair mutez mutez) mutez)
                           (pair (lambda (pair address (pair mutez mutez)) (pair mutez mutez))
                                 (lambda
                                    (pair timestamp (pair address (pair mutez mutez)))
                                    (pair address (pair mutez mutez)))))))
         (option (pair (pair timestamp (pair mutez address)) (pair (map address mutez) bool)))
         { RENAME @ctx_setup__eqTez_fst_snd_snd__2__slash_171 ;
           DUP ;
           CAR @ctx_setup_slash_172 ;
           CAR @ctx ;
           { DIP { DUP } ; SWAP } ;
           CAR @ctx_setup_slash_172 ;
           CDR @setup ;
           { DIP 2 { DUP } ; DIG 2 } ;
           { CDR ; CAR @eqTez_slash_170 } ;
           PUSH mutez 0 ;
           { DIP 4 { DUP } ; DIG 4 } ;
           { CDR ; CDR ; CAR @fst_slash_162 } ;
           { DIP 5 { DUP } ; DIG 5 } ;
           { CDR ; CDR ; CDR ; CAR @snd_slash_166 } ;
           { DIP 6 { DUP } ; DIG 6 } ;
           { CDR ; CDR ; CDR ; CDR @snd__2__slash_164 } ;
           { DIP 6 { DUP @ctx } ; DIG 6 } ;
           EXEC ;
           EXEC ;
           EXEC ;
           PAIR ;
           EXEC ;
           IF { PUSH (pair (map address mutez) bool) (Pair {} False) ;
                { DIP { DUP @setup } ; SWAP } ;
                PAIR ;
                SOME }
              { NONE (pair (pair timestamp (pair mutez address)) (pair (map address mutez) bool)) } ;
           DIP { DROP } ;
           DIP { DROP } ;
           DIP { DROP } } ;
       PAIR @inner ;
       BALANCE ;
       AMOUNT ;
       PAIR ;
       SENDER ;
       PAIR ;
       NOW ;
       PAIR @ctx ;
       { DIP { DUP @inner } ; SWAP } ;
       { DIP 7 { DUP @setup } ; DIG 7 } ;
       { DIP 2 { DUP @ctx } ; DIG 2 } ;
       PAIR ;
       DIP { DUP ; CAR ; SWAP ; CDR } ;
       PAIR ;
       EXEC ;
       IF_NONE { UNIT ; FAILWITH } { DUP @v ; DIP { DROP } } ;
       DIP { DROP } ;
       DIP { DROP } ;
       DIP { DROP } ;
       DIP { DROP } ;
       DIP { DROP } ;
       DIP { DROP } ;
       DIP { DROP } ;
       NIL operation ;
       PAIR ;
       DIP { DROP 2 } };
