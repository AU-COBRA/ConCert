<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/annenkov/ConCert" target="_balnk">Project Page</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ConCert.pcuic.PCUICFacts</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab23"></a><h1 class="section">Lemmas about the environment substitutions, closedness, etc. on expressions</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MetaCoq.Template.monad_utils</span> <span class="id" title="library">MetaCoq.Template.All</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Setoids.Setoid.html#"><span class="id" title="library">Setoid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">ConCert</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.CustomTactics.html#"><span class="id" title="library">CustomTactics</span></a> <a class="idref" href="ConCert.Misc.html#"><span class="id" title="library">Misc</span></a> <a class="idref" href="ConCert.MyEnv.html#"><span class="id" title="library">MyEnv</span></a> <a class="idref" href="ConCert.Ast.html#"><span class="id" title="library">Ast</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#"><span class="id" title="library">EvalE</span></a> <a class="idref" href="ConCert.pcuic.PCUICTranslate.html#"><span class="id" title="library">PCUICTranslate</span></a> <a class="idref" href="ConCert.EnvSubst.html#"><span class="id" title="library">EnvSubst</span></a> <a class="idref" href="ConCert.Wf.html#"><span class="id" title="library">Wf</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Basics</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">program_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Lia</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Nat</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">NamelessSubst</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="ConCert.EvalE.html#expr_eval_n"><span class="id" title="definition">expr_eval_n</span></a> <a class="idref" href="ConCert.EvalE.html#expr_eval_i"><span class="id" title="definition">expr_eval_i</span></a> : <span class="id" title="var">facts</span>.<br/>

<br/>
</div>

<div class="doc">
An elimination principle that takes into account nested occurrences of expressions
   in the list of branches for <span class="inlinecode"><a class="idref" href="ConCert.Ast.html#eCase"><span class="id" title="constructor">eCase</span></a></span> 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="expr_elim_case"><span class="id" title="definition">expr_elim_case</span></a> (<span class="id" title="var">P</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hrel</span>    : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eRel"><span class="id" title="constructor">eRel</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hvar</span>    : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eVar"><span class="id" title="constructor">eVar</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hlam</span>    :<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>) (<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>), <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eLambda"><span class="id" title="constructor">eLambda</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">HtyLam</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>), <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eTyLam"><span class="id" title="constructor">eTyLam</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hletin</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">e0</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>), <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eLetIn"><span class="id" title="constructor">eLetIn</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e0"><span class="id" title="variable">e0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Happ</span>    :<span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">e0</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eApp"><span class="id" title="constructor">eApp</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e0"><span class="id" title="variable">e0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hconstr</span> :<span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span> : <a class="idref" href="ConCert.Ast.html#inductive"><span class="id" title="definition">inductive</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>), <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hconst</span>  :<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hcase</span>   : <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> (<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.Ast.html#pat"><span class="id" title="record">pat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>), <span class="id" title="inductive">All</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a>)) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eCase"><span class="id" title="constructor">eCase</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hfix</span>    :<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> <span class="id" title="var">n0</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>) (<span class="id" title="var">t</span> <span class="id" title="var">t0</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>), <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eFix"><span class="id" title="constructor">eFix</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n0"><span class="id" title="variable">n0</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t0"><span class="id" title="variable">t0</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hty</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="ConCert.Ast.html#eTy"><span class="id" title="constructor">eTy</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">fix</span> <span class="id" title="var">ind</span> (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>) := <span class="id" title="var">_</span> ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hvar</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlam</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">HtyLam</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hletin</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Happ</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hconstr</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hconst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcase</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hfix</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ind</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hty</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Values"><span class="id" title="section">Values</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="vars_to_apps_unfold"><span class="id" title="lemma">vars_to_apps_unfold</span></a> <span class="id" title="var">vs</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">acc</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#vars_to_apps"><span class="id" title="definition">vars_to_apps</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#acc"><span class="id" title="variable">acc</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Ast.html#eApp"><span class="id" title="constructor">eApp</span></a> (<a class="idref" href="ConCert.Ast.html#vars_to_apps"><span class="id" title="definition">vars_to_apps</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#acc"><span class="id" title="variable">acc</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#vs"><span class="id" title="variable">vs</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>;<span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Ast.html#vars_to_apps"><span class="id" title="definition">vars_to_apps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#fold_left_app"><span class="id" title="lemma">fold_left_app</span></a>; <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="vars_to_apps_iclosed_n"><span class="id" title="lemma">vars_to_apps_iclosed_n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span> : <a class="idref" href="ConCert.Ast.html#inductive"><span class="id" title="definition">inductive</span></a>) (<span class="id" title="var">n0</span> : <a class="idref" href="ConCert.Ast.html#ename"><span class="id" title="definition">ename</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.EvalE.html#val"><span class="id" title="inductive">val</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">All</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> : <a class="idref" href="ConCert.EvalE.html#val"><span class="id" title="inductive">val</span></a> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.of_val_i"><span class="id" title="definition">of_val_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.Ast.html#vars_to_apps"><span class="id" title="definition">vars_to_apps</span></a> (<a class="idref" href="ConCert.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n0"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.of_val_i"><span class="id" title="definition">of_val_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n0</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#vars_to_apps_unfold"><span class="id" title="lemma">vars_to_apps_unfold</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_andb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Lemma&nbsp;Forall_lookup_i&nbsp;{A}&nbsp;ρ&nbsp;n&nbsp;e&nbsp;(P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Prop)&nbsp;:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;ForallEnv&nbsp;P&nbsp;ρ&nbsp;-&gt;&nbsp;lookup_i&nbsp;ρ&nbsp;n&nbsp;=&nbsp;Some&nbsp;e&nbsp;-&gt;&nbsp;P&nbsp;e.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;Hfe&nbsp;Hl.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;revert&nbsp;dependent&nbsp;n.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;Hfe;intros&nbsp;n&nbsp;Hl.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;+&nbsp;inversion&nbsp;Hl.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;+&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;destruct&nbsp;x;&nbsp;destruct&nbsp;(Nat.eqb&nbsp;n&nbsp;0);inversion&nbsp;Hl;subst;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="All_lookup_i"><span class="id" title="lemma">All_lookup_i</span></a> {<span class="id" title="var">A</span>} ρ <span class="id" title="var">n</span> <span class="id" title="var">e</span> (<span class="id" title="var">P</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#AllEnv"><span class="id" title="definition">AllEnv</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.MyEnv.html#lookup_i"><span class="id" title="definition">lookup_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfe</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfe</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#eqb"><span class="id" title="definition">Nat.eqb</span></a> <span class="id" title="var">n</span> 0);<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hl</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="var">ty</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> <span class="id" title="var">m1</span> <span class="id" title="var">H</span> <span class="id" title="var">Hc</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n1</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHty</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">split_andb</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">leb_ltb_to_prop</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">split_andb</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_ty_m_n"><span class="id" title="lemma">iclosed_ty_m_n</span></a> <span class="id" title="var">ty</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span> := <span class="id" title="var">n</span>);<span class="id" title="tactic">eauto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_ty_0"><span class="id" title="lemma">iclosed_ty_0</span></a> <span class="id" title="var">ty</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> 0 <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_m_n"><span class="id" title="lemma">iclosed_ty_m_n</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_n_geq"><span class="id" title="lemma">iclosed_n_geq</span></a> <span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_elim_case"><span class="id" title="definition">expr_elim_case</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> <span class="id" title="var">m1</span> <span class="id" title="var">Hgeq</span> <span class="id" title="var">H1</span>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">leb_ltb_to_prop</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv_andb</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>;<span class="id" title="var">lia</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHe</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHe</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Ht</span> <span class="id" title="var">He1</span>] <span class="id" title="var">He2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He1</span>, <span class="id" title="var">He2</span>, <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">split_andb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHe1</span>;<span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHe2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:= <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n1</span>);<span class="id" title="tactic">eauto</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He1</span>, <span class="id" title="var">He2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_andb</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">Hp</span> <span class="id" title="var">Ht</span>] <span class="id" title="var">He1</span>] <span class="id" title="var">Hforall</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hp</span>,<span class="id" title="var">Ht</span>,<span class="id" title="var">He1</span>,<span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">split_andb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#forallb_impl_inner"><span class="id" title="lemma">forallb_impl_inner</span></a>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hp</span>;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">IHe</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">All_forallb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">forallb_All</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">P</span>:= <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> (<span class="id" title="notation">#|</span><a class="idref" href="ConCert.Ast.html#pVars"><span class="id" title="projection">pVars</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a>)<span class="id" title="notation">|</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><span class="id" title="var">n1</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">All_impl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="notation">#|</span><a class="idref" href="ConCert.Ast.html#pVars"><span class="id" title="projection">pVars</span></a> <span class="id" title="var">x</span><span class="id" title="notation">.1</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n1</span>). <span class="id" title="var">lia</span>. <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHe</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n1</span>));<span class="id" title="tactic">eauto</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_geq"><span class="id" title="lemma">iclosed_ty_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=<span class="id" title="var">n1</span>);<span class="id" title="tactic">auto</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_m_n"><span class="id" title="lemma">iclosed_m_n</span></a> <span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_n_geq"><span class="id" title="lemma">iclosed_n_geq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span> := <span class="id" title="var">n</span>);<span class="id" title="tactic">eauto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_n_0"><span class="id" title="lemma">iclosed_n_0</span></a> <span class="id" title="var">e</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_m_n"><span class="id" title="lemma">iclosed_m_n</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">iclosed_ty_m_n</span> <span class="id" title="var">iclosed_ty_0</span> <span class="id" title="var">iclosed_m_n</span> <span class="id" title="var">iclosed_n_0</span> : <span class="id" title="var">facts</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="iclosed_ty_env_ok"><span class="id" title="lemma">iclosed_ty_env_ok</span></a> <span class="id" title="var">n</span> ρ <span class="id" title="var">ty</span> : <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Wf.html#ty_env_ok"><span class="id" title="definition">ty_env_ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> ρ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n0</span> ρ <span class="id" title="var">Hc</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">assert</span> (<span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">leb_ltb_to_prop</span>;<span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_i_ty_closed"><span class="id" title="lemma">subst_env_i_ty_closed</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ty</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Wf.html#ty_env_ok"><span class="id" title="definition">ty_env_ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#AllEnv"><span class="id" title="definition">AllEnv</span></a> (<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><span class="id" title="notation">|</span>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i_ty"><span class="id" title="definition">subst_env_i_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> ρ <span class="id" title="var">Hok</span> <span class="id" title="var">Henv</span> <span class="id" title="var">Hc</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHty</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hok</span>;<span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>;<span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hnle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">leb_ltb_to_prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hc'</span> : <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a><span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">length</span></a> ρ) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">PeanoNat.Nat.ltb_lt</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.lookup_ty"><span class="id" title="definition">lookup_ty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.MyEnv.html#lookup_i_length"><span class="id" title="lemma">lookup_i_length</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a><span class="id" title="var">n1</span>) <span class="id" title="var">Hc'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">e0</span> <span class="id" title="var">He0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He0</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="ConCert.Ast.html#eTy"><span class="id" title="constructor">eTy</span></a> <span class="id" title="var">t</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#All_lookup_i"><span class="id" title="lemma">All_lookup_i</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Henv</span>);<span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">leb_ltb_to_prop</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hok</span>;<span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>;<span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_i_ty_closed_inv"><span class="id" title="lemma">subst_env_i_ty_closed_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ty</span> : <a class="idref" href="ConCert.Ast.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#AllEnv"><span class="id" title="definition">AllEnv</span></a> (<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i_ty"><span class="id" title="definition">subst_env_i_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_ty"><span class="id" title="definition">iclosed_ty</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><span class="id" title="notation">|</span>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> ρ <span class="id" title="var">Henv</span> <span class="id" title="var">Hc</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span>ρ<span class="id" title="notation">|</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span>ρ<span class="id" title="notation">|</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHty</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>;<span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hnle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span>ρ<span class="id" title="notation">|</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hn</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">leb_ltb_to_prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnk</span> : <span class="id" title="notation">#|</span>ρ<span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <span class="id" title="var">n1</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_ge"><span class="id" title="lemma">PeanoNat.Nat.ltb_ge</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ConCert.MyEnv.html#lookup_i_length_false"><span class="id" title="lemma">lookup_i_length_false</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">Hnk</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.lookup_ty"><span class="id" title="definition">lookup_ty</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">leb_ltb_to_prop</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hc</span>;<span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">subst_env_i_ty_closed</span> <span class="id" title="var">subst_env_i_ty_closed_inv</span> <span class="id" title="var">iclosed_ty_env_ok</span> : <span class="id" title="var">facts</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_iclosed_n"><span class="id" title="lemma">subst_env_iclosed_n</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Wf.html#ty_expr_env_ok"><span class="id" title="definition">ty_expr_env_ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">All</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><span class="id" title="notation">|</span>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">.[</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">]</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_elim_case"><span class="id" title="definition">expr_elim_case</span></a>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> ρ <span class="id" title="var">Hok</span> <span class="id" title="var">Hc</span> <span class="id" title="var">Hec</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">try</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hok</span>;<span class="id" title="tactic">try</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hec</span>;<span class="id" title="tactic">try</span> <span class="id" title="var">split_andb</span>;<span class="id" title="var">tryfalse</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;eRel&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i"><span class="id" title="definition">subst_env_i</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hnle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">leb_ltb_to_prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hc'</span> : <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a><span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">length</span></a> ρ) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">PeanoNat.Nat.ltb_lt</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.MyEnv.html#lookup_i_length"><span class="id" title="lemma">lookup_i_length</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a><span class="id" title="var">n1</span>) <span class="id" title="var">Hc'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">e0</span> <span class="id" title="var">He0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He0</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#All_lookup_i"><span class="id" title="lemma">All_lookup_i</span></a> <span class="id" title="keyword">with</span> (ρ0 := ρ) (<span class="id" title="var">P</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">e1</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <span class="id" title="var">n1</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">All_impl</span> (<span class="id" title="var">P</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">e1</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>));<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">change</span> (<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> (0<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><span class="id" title="var">n1</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>); <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_m_n"><span class="id" title="lemma">iclosed_m_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">leb_ltb_to_prop</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv_andb</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>. <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ind</span> <span class="id" title="var">tys</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.forallb_All</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hall3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.forallb_All</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hall1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.forallb_All</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hall0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.forallb_All</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hall2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="lemma">All_mix</span> <span class="id" title="var">Hall0</span> <span class="id" title="var">Hall2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hall'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="lemma">All_mix</span> <span class="id" title="var">Hall3</span> <span class="id" title="var">Hall1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hall</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.All_forallb</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.All_map</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hall'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Forall_All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_i_ty_closed"><span class="id" title="lemma">subst_env_i_ty_closed</span></a>;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.All_forallb</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.All_map</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hall</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">All_impl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">PeanoNat.Nat.add_assoc</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H8</span>;<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv_andb</span> <span class="id" title="var">H1</span>. <span class="id" title="var">split_andb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_i_ty_closed"><span class="id" title="lemma">subst_env_i_ty_closed</span></a>;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_iclosed_n_inv"><span class="id" title="lemma">subst_env_iclosed_n_inv</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">All</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">.[</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">]</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><span class="id" title="notation">|</span>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.Ast.html#expr_ind_case"><span class="id" title="definition">expr_ind_case</span></a>;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> ρ <span class="id" title="var">Hc</span> <span class="id" title="var">Hec</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">try</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hec</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_succ_l"><span class="id" title="lemma">PeanoNat.Nat.add_succ_l</span></a>;<span class="id" title="var">tryfalse</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;eRel&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i"><span class="id" title="definition">subst_env_i</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hnle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="notation">#|</span>ρ<span class="id" title="notation">|</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hn</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">leb_ltb_to_prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnk</span> : <span class="id" title="notation">#|</span>ρ<span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_ge"><span class="id" title="lemma">PeanoNat.Nat.ltb_ge</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ConCert.MyEnv.html#lookup_i_length_false"><span class="id" title="lemma">lookup_i_length_false</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">Hnk</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hec</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">leb_ltb_to_prop</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>. <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hec</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">forallb_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#forallb_impl_inner"><span class="id" title="lemma">forallb_impl_inner</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_i_ty_closed_inv"><span class="id" title="lemma">subst_env_i_ty_closed_inv</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hec</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.forallb_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">forallb_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">PeanoNat.Nat.add_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <span class="id" title="var">HH</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <a class="idref" href="ConCert.Ast.html#pat"><span class="id" title="record">pat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> (<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> (<span class="id" title="notation">#|</span><a class="idref" href="ConCert.Ast.html#pVars"><span class="id" title="projection">pVars</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a>)<span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">).[</span></a> ρ<a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">]</span></a> <a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">(</span></a><span class="id" title="notation">#|</span><a class="idref" href="ConCert.Ast.html#pVars"><span class="id" title="projection">pVars</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a>)<span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">k</span><a class="idref" href="ConCert.EnvSubst.html#54540d0b20e5346597cc6b136aeb56c5"><span class="id" title="notation">)</span></a>))) <span class="id" title="var">l</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">utils.forallb_Forall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>. <span class="id" title="var">split_andb</span>;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_iclosed_0"><span class="id" title="lemma">subst_env_iclosed_0</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Wf.html#ty_expr_env_ok"><span class="id" title="definition">ty_expr_env_ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> 0 <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">All</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><span class="id" title="notation">|</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="ConCert.EnvSubst.html#430fd7fffa1d3d539a8d4368d4fd5b83"><span class="id" title="notation">.[</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><a class="idref" href="ConCert.EnvSubst.html#430fd7fffa1d3d539a8d4368d4fd5b83"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_iclosed_n"><span class="id" title="lemma">subst_env_iclosed_n</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=0);<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_iclosed_0_inv"><span class="id" title="lemma">subst_env_iclosed_0_inv</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">All</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> =&gt; <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> 0 (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="ConCert.EnvSubst.html#430fd7fffa1d3d539a8d4368d4fd5b83"><span class="id" title="notation">.[</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><a class="idref" href="ConCert.EnvSubst.html#430fd7fffa1d3d539a8d4368d4fd5b83"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><span class="id" title="notation">|</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_iclosed_n_inv"><span class="id" title="lemma">subst_env_iclosed_n_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=0);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="of_value_closed"><span class="id" title="lemma">of_value_closed</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">v</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Wf.html#val_ok"><span class="id" title="inductive">val_ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a>  <span class="comment">(*&nbsp;this&nbsp;ensures&nbsp;that&nbsp;closures&nbsp;contain&nbsp;closed&nbsp;expressions&nbsp;*)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Ast.html#iclosed_n"><span class="id" title="definition">iclosed_n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.of_val_i"><span class="id" title="definition">of_val_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a> ) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">v</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.EvalE.html#val_elim_full"><span class="id" title="definition">val_elim_full</span></a>;<span class="id" title="tactic">intros</span> <span class="id" title="var">n1</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#vars_to_apps_iclosed_n"><span class="id" title="lemma">vars_to_apps_iclosed_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> <span class="id" title="var">cm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_andb</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_0"><span class="id" title="lemma">iclosed_ty_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_i_ty_closed"><span class="id" title="lemma">subst_env_i_ty_closed</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">All_map</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_m_n"><span class="id" title="lemma">iclosed_m_n</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_iclosed_n"><span class="id" title="lemma">subst_env_iclosed_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EvalE.html#AllEnv"><span class="id" title="definition">AllEnv</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>,<a class="idref" href="ConCert.Misc.html#fun_prod"><span class="id" title="definition">fun_prod</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i"><span class="id" title="definition">subst_env_i</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">split_andb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_0"><span class="id" title="lemma">iclosed_ty_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_i_ty_closed"><span class="id" title="lemma">subst_env_i_ty_closed</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">All_map</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_ty_0"><span class="id" title="lemma">iclosed_ty_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_i_ty_closed"><span class="id" title="lemma">subst_env_i_ty_closed</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">All_map</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_m_n"><span class="id" title="lemma">iclosed_m_n</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_iclosed_n"><span class="id" title="lemma">subst_env_iclosed_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EvalE.html#AllEnv"><span class="id" title="definition">AllEnv</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>,<a class="idref" href="ConCert.Misc.html#fun_prod"><span class="id" title="definition">fun_prod</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#iclosed_m_n"><span class="id" title="lemma">iclosed_m_n</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#subst_env_iclosed_n"><span class="id" title="lemma">subst_env_iclosed_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.EvalE.html#AllEnv"><span class="id" title="definition">AllEnv</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>,<a class="idref" href="ConCert.Misc.html#fun_prod"><span class="id" title="definition">fun_prod</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_i_ty_empty"><span class="id" title="lemma">subst_env_i_ty_empty</span></a> <span class="id" title="var">k</span> <span class="id" title="var">t</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i_ty"><span class="id" title="definition">subst_env_i_ty</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#t"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">f_equal</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span>);<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">subst_env_i_ty_empty</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_env_i_empty"><span class="id" title="lemma">subst_env_i_empty</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <a class="idref" href="ConCert.Ast.html#expr"><span class="id" title="inductive">expr</span></a>) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.subst_env_i_aux"><span class="id" title="definition">subst_env_i_aux</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.Ast.html#expr_ind_case"><span class="id" title="definition">expr_ind_case</span></a>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#leb"><span class="id" title="definition">Nat.leb</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#f_equal4"><span class="id" title="lemma">f_equal4</span></a>;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_id_f</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map_id"><span class="id" title="lemma">map_id</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">forall_map_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall_impl"><span class="id" title="lemma">Forall_impl</span></a>;<span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">Hp</span>;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">rewrite</span> &lt;-<span class="id" title="var">Hp</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;simplicity,&nbsp;we&nbsp;consider&nbsp;only&nbsp;constructors&nbsp;of&nbsp;arity&nbsp;0&nbsp;and&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="accepted_val"><span class="id" title="inductive">accepted_val</span></a> : <a class="idref" href="ConCert.EvalE.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="avContsr0"><span class="id" title="constructor">avContsr0</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">nm</span> <span class="id" title="var">v</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#accepted_val"><span class="id" title="inductive">accepted_val</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#accepted_val"><span class="id" title="inductive">accepted_val</span></a> (<a class="idref" href="ConCert.EvalE.html#vConstr"><span class="id" title="constructor">vConstr</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#nm"><span class="id" title="variable">nm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;| <a name="avContsr1"><span class="id" title="constructor">avContsr1</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">nm</span> <span class="id" title="var">v</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#accepted_val"><span class="id" title="inductive">accepted_val</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#accepted_val"><span class="id" title="inductive">accepted_val</span></a> (<a class="idref" href="ConCert.EvalE.html#vConstr"><span class="id" title="constructor">vConstr</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#nm"><span class="id" title="variable">nm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;| <a name="avClos"><span class="id" title="constructor">avClos</span></a> : <span class="id" title="keyword">forall</span> ρ <span class="id" title="var">nm</span> <span class="id" title="var">cm</span> <span class="id" title="var">ty1</span> <span class="id" title="var">ty2</span> <span class="id" title="var">e</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#accepted_val"><span class="id" title="inductive">accepted_val</span></a> (<a class="idref" href="ConCert.EvalE.html#vClos"><span class="id" title="constructor">vClos</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#nm"><span class="id" title="variable">nm</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#cm"><span class="id" title="variable">cm</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty1"><span class="id" title="variable">ty1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty2"><span class="id" title="variable">ty2</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="expr_eval_econstr"><span class="id" title="lemma">expr_eval_econstr</span></a> {<span class="id" title="var">n</span> <span class="id" title="var">nm</span> <span class="id" title="var">Σ</span> ρ <span class="id" title="var">i</span> <span class="id" title="var">v</span> <span class="id" title="var">mode</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#expr_eval_general"><span class="id" title="definition">expr_eval_general</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> (<a class="idref" href="ConCert.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#nm"><span class="id" title="variable">nm</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.EvalE.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.pcuic.PCUICFacts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.EvalE.html#vConstr"><span class="id" title="constructor">vConstr</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#nm"><span class="id" title="variable">nm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">mode</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Ast.html#resolve_constr"><span class="id" title="definition">resolve_constr</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">i</span> <span class="id" title="var">nm</span>);<span class="id" title="var">tryfalse</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Equivalence</span>.<br/>

<br/>
</div>

<div class="doc">
Correctness of the value-back-to-expression transformation 
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;creterion&nbsp;of&nbsp;correctness&nbsp;we&nbsp;consider&nbsp;the&nbsp;property&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;we&nbsp;start&nbsp;with&nbsp;a&nbsp;value&nbsp;<span class="inlinecode"><span class="id" title="var">v1</span></span>,&nbsp;the&nbsp;output&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">of_val</span></span> <span class="inlinecode"><span class="id" title="var">v1</span></span>&nbsp;after&nbsp;evaluation,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;give&nbsp;as&nbsp;some&nbsp;<span class="inlinecode"><span class="id" title="var">v2</span></span>&nbsp;equivalent&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">v1</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;we&nbsp;cannot&nbsp;ask&nbsp;<span class="inlinecode"><span class="id" title="var">v1</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">v2</span></span>&nbsp;to&nbsp;be&nbsp;equal,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instead&nbsp;we&nbsp;ask&nbsp;for&nbsp;equivalence.&nbsp;This&nbsp;is&nbsp;due&nbsp;to&nbsp;substitutions&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;in&nbsp;the&nbsp;environment&nbsp;while&nbsp;converting&nbsp;closures&nbsp;back&nbsp;to&nbsp;expressions&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="of_val_i_correct"><span class="id" title="lemma">of_val_i_correct</span></a> <span class="id" title="var">n</span> <span class="id" title="var">Σ</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.pcuic.PCUICFacts.html#accepted_val"><span class="id" title="inductive">accepted_val</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#expr_eval_i"><span class="id" title="definition">expr_eval_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.of_val_i"><span class="id" title="definition">of_val_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v1"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.EvalE.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v2"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.pcuic.PCUICFacts.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="ConCert.EnvSubst.html#f2ba7b8b8190b0c7a849826f1c6a67d7"><span class="id" title="notation">≈</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#v2"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hav</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">v2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">v1</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.EvalE.html#val_ind_full"><span class="id" title="definition">val_ind_full</span></a>;<span class="id" title="tactic">intros</span> <span class="id" title="var">v2</span> <span class="id" title="var">n0</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hav</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Ast.html#resolve_constr"><span class="id" title="definition">resolve_constr</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>);<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">facts</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ConCert.EvalE.html#expr_eval_general"><span class="id" title="definition">expr_eval_general</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ConCert.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">cv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ConCert.EvalE.html#expr_eval_general"><span class="id" title="definition">expr_eval_general</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.of_val_i"><span class="id" title="definition">of_val_i</span></a> <span class="id" title="var">v</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">fv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cv0</span> | | ]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">cv0</span>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span>;<span class="id" title="tactic">destruct</span> <span class="id" title="var">fv</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqfv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#Forall_inv"><span class="id" title="lemma">Forall_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> <span class="id" title="var">H2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqfv</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqcv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_eval_econstr"><span class="id" title="lemma">expr_eval_econstr</span></a> <span class="id" title="var">Heqcv</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HH1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">HH1</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">Heqfv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;this&nbsp;rewrite&nbsp;actually&nbsp;uses&nbsp;setoid_rewrite&nbsp;along&nbsp;the&nbsp;≈&nbsp;relation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqcv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_eval_econstr"><span class="id" title="lemma">expr_eval_econstr</span></a> <span class="id" title="var">Heqcv</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqcv</span>;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_eval_econstr"><span class="id" title="lemma">expr_eval_econstr</span></a> <span class="id" title="var">Heqcv</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**  <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqcv</span>;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_eval_econstr"><span class="id" title="lemma">expr_eval_econstr</span></a> <span class="id" title="var">Heqcv</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>;<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.EvalE.html#eval_type_i"><span class="id" title="definition">eval_type_i</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ty1</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;inst_env_i,subst_env_i;simpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;subst_env_i_empty.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflexivity.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;destruct&nbsp;n0;tryfalse.&nbsp;simpl&nbsp;in&nbsp;H1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion_clear&nbsp;H1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;inst_env_i,subst_env_i;simpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;subst_env_i_empty;reflexivity.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;+&nbsp;destruct&nbsp;n0;tryfalse.&nbsp;simpl&nbsp;in&nbsp;H1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion_clear&nbsp;H1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;inst_env_i,subst_env_i;simpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;subst_env_i_empty.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflexivity.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;+&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;n0;simpl&nbsp;in&nbsp;*;tryfalse.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(eval_type_i&nbsp;_&nbsp;_&nbsp;_);tryfalse;simpl&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;inversion&nbsp;H1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Qed.&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#Values"><span class="id" title="section">Values</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="FindLookupProperties"><span class="id" title="section">FindLookupProperties</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="lookup_ind_nth_error_False"><span class="id" title="lemma">lookup_ind_nth_error_False</span></a> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">key</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.MyEnv.html#lookup_with_ind_rec"><span class="id" title="definition">lookup_with_ind_rec</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#key"><span class="id" title="variable">key</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> ρ <span class="id" title="keyword">as</span> [ |<span class="id" title="var">a0</span> ρ0];<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">key</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">m</span>)) <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)  <span class="id" title="tactic">in</span> * <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="lookup_ind_nth_error_shift"><span class="id" title="lemma">lookup_ind_nth_error_shift</span></a> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">key</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.MyEnv.html#lookup_with_ind_rec"><span class="id" title="definition">lookup_with_ind_rec</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#4bfb4f2d0721ba668e3a802ab1b745a1"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.MyEnv.html#lookup_with_ind_rec"><span class="id" title="definition">lookup_with_ind_rec</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">i</span>;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> ρ;<span class="id" title="tactic">intros</span> <span class="id" title="var">i1</span> <span class="id" title="var">n1</span> <span class="id" title="var">H</span>;<span class="id" title="var">tryfalse</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>; <span class="id" title="tactic">destruct</span> ( <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">key</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="lookup_ind_nth_error"><span class="id" title="lemma">lookup_ind_nth_error</span></a> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">key</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.MyEnv.html#lookup_with_ind"><span class="id" title="definition">lookup_with_ind</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#key"><span class="id" title="variable">key</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> ρ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">intros</span> ρ0 <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> ρ0;<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.MyEnv.html#lookup_with_ind"><span class="id" title="definition">lookup_with_ind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">nm</span>,<span class="id" title="var">a0</span>); <span class="id" title="tactic">destruct</span> (<span class="id" title="var">nm</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">key</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#eqb_eq"><span class="id" title="lemma">String.eqb_eq</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#lookup_ind_nth_error_False"><span class="id" title="lemma">lookup_ind_nth_error_False</span></a> <span class="id" title="var">_</span> 0 0) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> ρ0;<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.MyEnv.html#lookup_with_ind"><span class="id" title="definition">lookup_with_ind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">nm</span>,<span class="id" title="var">a0</span>); <span class="id" title="tactic">destruct</span> (<span class="id" title="var">nm</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">key</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Strings.String.html#eqb_eq"><span class="id" title="lemma">String.eqb_eq</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">subst</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#lookup_ind_nth_error_shift"><span class="id" title="lemma">lookup_ind_nth_error_shift</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="lookup_i_nth_error"><span class="id" title="lemma">lookup_i_nth_error</span></a> (ρ : <a class="idref" href="ConCert.MyEnv.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.MyEnv.html#lookup_i"><span class="id" title="definition">lookup_i</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#i"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> ρ;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">nth_error_nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">replace</span> (<span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a>0) <span class="id" title="keyword">with</span> <span class="id" title="var">i</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_map_eq"><span class="id" title="lemma">find_map_eq</span></a> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">a</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.B"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p2"><span class="id" title="variable">p2</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p2"><span class="id" title="variable">p2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfind</span> <span class="id" title="var">Hfeq</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">a'</span> <span class="id" title="var">l'</span>];<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">p1</span> <span class="id" title="var">a'</span>);<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfind</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfeq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_map"><span class="id" title="lemma">find_map</span></a> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">a</span> (<span class="id" title="var">f</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.B"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p2"><span class="id" title="variable">p2</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p2"><span class="id" title="variable">p2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#a"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfind</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#find_map_eq"><span class="id" title="lemma">find_map_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_forallb_map"><span class="id" title="lemma">find_forallb_map</span></a> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>} {<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#X"><span class="id" title="variable">X</span></a>} {<span class="id" title="var">p0</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>} {<span class="id" title="var">p1</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>} {<span class="id" title="var">f</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#Y"><span class="id" title="variable">Y</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#X"><span class="id" title="variable">X</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p0"><span class="id" title="variable">p0</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#xs"><span class="id" title="variable">xs</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span>;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hfnd</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">p0</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfnd</span>;<span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">p1</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>));<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<span class="id" title="var">p1</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>));<span class="id" title="var">tryfalse</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_forallb"><span class="id" title="lemma">find_forallb</span></a> {<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">p1</span> : <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>} {<span class="id" title="var">p</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hfnd</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">xs</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hall</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map_id"><span class="id" title="lemma">map_id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<a class="idref" href="ConCert.pcuic.PCUICFacts.html#find_forallb_map"><span class="id" title="lemma">find_forallb_map</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_none_fst"><span class="id" title="lemma">find_none_fst</span></a> {<span class="id" title="var">p</span>} (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties.B"><span class="id" title="variable">B</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#2e889d5867d2bfffb9f8d04b7b23cbd7"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> (<a class="idref" href="ConCert.pcuic.PCUICFacts.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#2e889d5867d2bfffb9f8d04b7b23cbd7"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">ab</span> <span class="id" title="var">l1'</span>];<span class="id" title="tactic">intros</span> <span class="id" title="var">l2</span> <span class="id" title="var">Hmap</span> <span class="id" title="var">Hfnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ab</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">b</span>];<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hmap</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">p</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">p0</span>));<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">eauto</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#FindLookupProperties"><span class="id" title="section">FindLookupProperties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Validate"><span class="id" title="section">Validate</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="valid_ty_env_ty_env_ok"><span class="id" title="lemma">valid_ty_env_ty_env_ok</span></a> ρ <span class="id" title="var">n</span> <span class="id" title="var">ty</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#valid_ty_env"><span class="id" title="definition">valid_ty_env</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Wf.html#ty_env_ok"><span class="id" title="definition">ty_env_ok</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.exprs"><span class="id" title="abbreviation">exprs</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#ty"><span class="id" title="variable">ty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> ρ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#lookup_i_nth_error"><span class="id" title="lemma">lookup_i_nth_error</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#lookup_i_nth_error"><span class="id" title="lemma">lookup_i_nth_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Nat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span>);<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">nth_error_map</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ρ (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <span class="id" title="var">n0</span>));<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span><span class="id" title="notation">.2</span>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">valid_ty_env_ty_env_ok</span> : <span class="id" title="var">facts</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="valid_env_ty_expr_env_ok"><span class="id" title="lemma">valid_env_ty_expr_env_ok</span></a> ρ <span class="id" title="var">n</span> <span class="id" title="var">e</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.EvalE.html#valid_env"><span class="id" title="definition">valid_env</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Wf.html#ty_expr_env_ok"><span class="id" title="definition">ty_expr_env_ok</span></a> (<a class="idref" href="ConCert.EnvSubst.html#NamelessSubst.exprs"><span class="id" title="abbreviation">exprs</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) <a class="idref" href="ConCert.pcuic.PCUICFacts.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#e"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> ρ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span> <span class="id" title="keyword">using</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#expr_elim_case"><span class="id" title="definition">expr_elim_case</span></a>;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">intuition</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#valid_ty_env_ty_env_ok"><span class="id" title="lemma">valid_ty_env_ty_env_ok</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ind</span> <span class="id" title="var">tys</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#forallb_impl_inner"><span class="id" title="lemma">forallb_impl_inner</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#valid_ty_env_ty_env_ok"><span class="id" title="lemma">valid_ty_env_ty_env_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All_forallb</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">forallb_All</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Misc.html#All_impl_inner"><span class="id" title="lemma">All_impl_inner</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">All_impl</span> <span class="id" title="var">H</span>);<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.pcuic.PCUICFacts.html#Validate"><span class="id" title="section">Validate</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
