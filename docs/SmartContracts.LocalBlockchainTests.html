<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/annenkov/ConCert" target="_balnk">Project Page</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">SmartContracts.LocalBlockchainTests</h1>

<div class="code">
<span class="comment">(*&nbsp;This&nbsp;file&nbsp;computes&nbsp;with&nbsp;the&nbsp;Congress&nbsp;and&nbsp;an&nbsp;actual&nbsp;blockchain<br/>
implementation,&nbsp;showing&nbsp;that&nbsp;everything&nbsp;computes&nbsp;from&nbsp;within&nbsp;Coq.&nbsp;It<br/>
also&nbsp;contains&nbsp;specializations&nbsp;of&nbsp;the&nbsp;results&nbsp;proven&nbsp;in&nbsp;Congress.v&nbsp;to<br/>
our&nbsp;particular&nbsp;implementations&nbsp;of&nbsp;blockchains.&nbsp;*)</span><br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.Monads.html#"><span class="id" title="library">Monads</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.Blockchain.html#"><span class="id" title="library">Blockchain</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.LocalBlockchain.html#"><span class="id" title="library">LocalBlockchain</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.Congress.html#"><span class="id" title="library">Congress</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.Containers.html#"><span class="id" title="library">Containers</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.BoundedN.html#"><span class="id" title="library">BoundedN</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.Extras.html#"><span class="id" title="library">Extras</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">SmartContracts</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SmartContracts.Serializable.html#"><span class="id" title="library">Serializable</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">RecordUpdate</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="RecordUpdate.RecordUpdate.html#"><span class="id" title="library">RecordUpdate</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="LocalBlockchainTests"><span class="id" title="section">LocalBlockchainTests</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Addresses&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="creator"><span class="id" title="definition">creator</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#Address"><span class="id" title="method">Address</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.BoundedN.html#BoundedN.of_Z_const"><span class="id" title="definition">BoundedN.of_Z_const</span></a> <a class="idref" href="SmartContracts.LocalBlockchain.html#AddrSize"><span class="id" title="definition">AddrSize</span></a> 10.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="person_1"><span class="id" title="definition">person_1</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#Address"><span class="id" title="method">Address</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.BoundedN.html#BoundedN.of_Z_const"><span class="id" title="definition">BoundedN.of_Z_const</span></a> <a class="idref" href="SmartContracts.LocalBlockchain.html#AddrSize"><span class="id" title="definition">AddrSize</span></a> 11.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="person_2"><span class="id" title="definition">person_2</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#Address"><span class="id" title="method">Address</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.BoundedN.html#BoundedN.of_Z_const"><span class="id" title="definition">BoundedN.of_Z_const</span></a> <a class="idref" href="SmartContracts.LocalBlockchain.html#AddrSize"><span class="id" title="definition">AddrSize</span></a> 12.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="person_3"><span class="id" title="definition">person_3</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#Address"><span class="id" title="method">Address</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.BoundedN.html#BoundedN.of_Z_const"><span class="id" title="definition">BoundedN.of_Z_const</span></a> <a class="idref" href="SmartContracts.LocalBlockchain.html#AddrSize"><span class="id" title="definition">AddrSize</span></a> 13.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> := <a class="idref" href="SmartContracts.LocalBlockchain.html#LocalChainBuilderDepthFirst"><span class="id" title="instance">LocalChainBuilderDepthFirst</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain1"><span class="id" title="definition">chain1</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> := <a class="idref" href="SmartContracts.Blockchain.html#builder_initial"><span class="id" title="method">builder_initial</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="add_block"><span class="id" title="definition">add_block</span></a> (<span class="id" title="var">chain</span> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a>) <span class="id" title="var">acts</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">header</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">block_height</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">S</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">(</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">chain_height</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">chain</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">block_slot</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">S</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">(</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">current_slot</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">chain</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">block_finalized_height</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">finalized_height</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">chain</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">block_creator</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">creator</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">block_reward</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_block_Header"><span class="id" title="constructor">50;</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain"><span class="id" title="variable">chain</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#header"><span class="id" title="variable">header</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#acts"><span class="id" title="variable">acts</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Creator&nbsp;created&nbsp;an&nbsp;empty&nbsp;block&nbsp;(and&nbsp;gets&nbsp;some&nbsp;coins)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain2"><span class="id" title="definition">chain2</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain1"><span class="id" title="definition">chain1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain2"><span class="id" title="definition">chain2</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain2"><span class="id" title="definition">chain2</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#creator"><span class="id" title="definition">creator</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Creator&nbsp;transfers&nbsp;10&nbsp;coins&nbsp;to&nbsp;person_1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain3"><span class="id" title="definition">chain3</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain2"><span class="id" title="definition">chain2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#creator"><span class="id" title="definition">creator</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#act_transfer"><span class="id" title="constructor">act_transfer</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> 10)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain3"><span class="id" title="definition">chain3</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain3"><span class="id" title="definition">chain3</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#creator"><span class="id" title="definition">creator</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;person_1&nbsp;deploys&nbsp;a&nbsp;Congress&nbsp;contract&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="setup_rules"><span class="id" title="definition">setup_rules</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">min_vote_count_permille</span></a> <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">200;</span></a> <span class="comment">(*&nbsp;20*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">margin_needed_permille</span></a> <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">501;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">debating_period_in_blocks</span></a> <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_rules"><span class="id" title="constructor">0;</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="setup"><span class="id" title="definition">setup</span></a> := <a class="idref" href="SmartContracts.Congress.html#build_setup"><span class="id" title="constructor">Congress.build_setup</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#setup_rules"><span class="id" title="definition">setup_rules</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="deploy_congress"><span class="id" title="definition">deploy_congress</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#ActionBody"><span class="id" title="inductive">ActionBody</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#create_deployment"><span class="id" title="definition">create_deployment</span></a> 5 <a class="idref" href="SmartContracts.Congress.html#contract"><span class="id" title="definition">Congress.contract</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#setup"><span class="id" title="definition">setup</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain4"><span class="id" title="definition">chain4</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain3"><span class="id" title="definition">chain3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#deploy_congress"><span class="id" title="definition">deploy_congress</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="congress_1"><span class="id" title="definition">congress_1</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#Address"><span class="id" title="method">Address</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="SmartContracts.Blockchain.html#outgoing_txs"><span class="id" title="definition">outgoing_txs</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a>) <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">tx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="SmartContracts.Blockchain.html#tx_to"><span class="id" title="projection">tx_to</span></a> <span class="id" title="var">tx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#creator"><span class="id" title="definition">creator</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_1"><span class="id" title="definition">congress_1</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="congress_ifc"><span class="id" title="definition">congress_ifc</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#ContractInterface"><span class="id" title="record">ContractInterface</span></a> <a class="idref" href="SmartContracts.Congress.html#Msg"><span class="id" title="inductive">Congress.Msg</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="SmartContracts.Blockchain.html#get_contract_interface"><span class="id" title="definition">get_contract_interface</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_1"><span class="id" title="definition">congress_1</span></a> <a class="idref" href="SmartContracts.Congress.html#Msg"><span class="id" title="inductive">Congress.Msg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Using&nbsp;unpack_option&nbsp;here&nbsp;is&nbsp;extremely&nbsp;slow&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="SmartContracts.Blockchain.html#build_contract_interface"><span class="id" title="constructor">build_contract_interface</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.LocalBlockchainTests.html#creator"><span class="id" title="definition">creator</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span> =&gt; <a class="idref" href="SmartContracts.LocalBlockchainTests.html#deploy_congress"><span class="id" title="definition">deploy_congress</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="congress_state"><span class="id" title="definition">congress_state</span></a> <span class="id" title="var">lc</span> : <a class="idref" href="SmartContracts.Congress.html#State"><span class="id" title="record">Congress.State</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="SmartContracts.Blockchain.html#env_contract_states"><span class="id" title="projection">env_contract_states</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#lc"><span class="id" title="variable">lc</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_1"><span class="id" title="definition">congress_1</span></a> <a class="idref" href="SmartContracts.Monads.html#f1146025ce6377896c1a30f88a02c8cb"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="SmartContracts.Serializable.html#deserialize"><span class="id" title="method">deserialize</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;And&nbsp;also&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; {| <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">owner</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">creator</span></a><a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">state_rules</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">setup_rules</span></a><a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">proposals</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">FMap.empty</span></a><a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">next_proposal_id</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">0;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">members</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="SmartContracts.Congress.html#build_state"><span class="id" title="constructor">FMap.empty</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_state"><span class="id" title="definition">congress_state</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Containers.html#FMap.elements"><span class="id" title="abbreviation">FMap.elements</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_state"><span class="id" title="definition">congress_state</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a>).(<a class="idref" href="SmartContracts.Congress.html#members"><span class="id" title="projection">members</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;person_1&nbsp;adds&nbsp;person_1&nbsp;and&nbsp;person_2&nbsp;as&nbsp;members&nbsp;of&nbsp;congress&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="add_person"><span class="id" title="definition">add_person</span></a> <span class="id" title="var">p</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_ifc"><span class="id" title="definition">congress_ifc</span></a>.(<a class="idref" href="SmartContracts.Blockchain.html#send"><span class="id" title="projection">send</span></a>) 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="SmartContracts.Congress.html#add_member"><span class="id" title="constructor">add_member</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#p"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain5"><span class="id" title="definition">chain5</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">acts</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_person"><span class="id" title="definition">add_person</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_person"><span class="id" title="definition">add_person</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_2"><span class="id" title="definition">person_2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain4"><span class="id" title="definition">chain4</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#acts"><span class="id" title="variable">acts</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Containers.html#FMap.elements"><span class="id" title="abbreviation">FMap.elements</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_state"><span class="id" title="definition">congress_state</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain5"><span class="id" title="definition">chain5</span></a>).(<a class="idref" href="SmartContracts.Congress.html#members"><span class="id" title="projection">members</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain5"><span class="id" title="definition">chain5</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_1"><span class="id" title="definition">congress_1</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;person_1&nbsp;creates&nbsp;a&nbsp;proposal&nbsp;to&nbsp;send&nbsp;3&nbsp;coins&nbsp;to&nbsp;person_3&nbsp;using&nbsp;funds<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;contract&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="create_proposal_call"><span class="id" title="definition">create_proposal_call</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_ifc"><span class="id" title="definition">congress_ifc</span></a>.(<a class="idref" href="SmartContracts.Blockchain.html#send"><span class="id" title="projection">send</span></a>) 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="SmartContracts.Congress.html#create_proposal"><span class="id" title="constructor">create_proposal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Congress.html#cact_transfer"><span class="id" title="constructor">cact_transfer</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_3"><span class="id" title="definition">person_3</span></a> 3<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain6"><span class="id" title="definition">chain6</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain5"><span class="id" title="definition">chain5</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#create_proposal_call"><span class="id" title="definition">create_proposal_call</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Containers.html#FMap.elements"><span class="id" title="abbreviation">FMap.elements</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_state"><span class="id" title="definition">congress_state</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain6"><span class="id" title="definition">chain6</span></a>).(<a class="idref" href="SmartContracts.Congress.html#proposals"><span class="id" title="projection">proposals</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;person_1&nbsp;and&nbsp;person_2&nbsp;vote&nbsp;for&nbsp;the&nbsp;proposal&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="vote_proposal"><span class="id" title="definition">vote_proposal</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_ifc"><span class="id" title="definition">congress_ifc</span></a>.(<a class="idref" href="SmartContracts.Blockchain.html#send"><span class="id" title="projection">send</span></a>) 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="SmartContracts.Congress.html#vote_for_proposal"><span class="id" title="constructor">vote_for_proposal</span></a> 1)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain7"><span class="id" title="definition">chain7</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">acts</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_1"><span class="id" title="definition">person_1</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#vote_proposal"><span class="id" title="definition">vote_proposal</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_2"><span class="id" title="definition">person_2</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#vote_proposal"><span class="id" title="definition">vote_proposal</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain6"><span class="id" title="definition">chain6</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#acts"><span class="id" title="variable">acts</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Containers.html#FMap.elements"><span class="id" title="abbreviation">FMap.elements</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_state"><span class="id" title="definition">congress_state</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain7"><span class="id" title="definition">chain7</span></a>).(<a class="idref" href="SmartContracts.Congress.html#proposals"><span class="id" title="projection">proposals</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Person&nbsp;3&nbsp;finishes&nbsp;the&nbsp;proposal&nbsp;(anyone&nbsp;can&nbsp;finish&nbsp;it&nbsp;after&nbsp;voting)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="finish_proposal"><span class="id" title="definition">finish_proposal</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_ifc"><span class="id" title="definition">congress_ifc</span></a>.(<a class="idref" href="SmartContracts.Blockchain.html#send"><span class="id" title="projection">send</span></a>) 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="SmartContracts.Congress.html#finish_proposal"><span class="id" title="constructor">finish_proposal</span></a> 1)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="chain8"><span class="id" title="definition">chain8</span></a> : <a class="idref" href="SmartContracts.LocalBlockchainTests.html#ChainBuilder"><span class="id" title="definition">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Extras.html#unpack_option"><span class="id" title="definition">unpack_option</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain7"><span class="id" title="definition">chain7</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="SmartContracts.Blockchain.html#build_act"><span class="id" title="constructor">build_act</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_3"><span class="id" title="definition">person_3</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#finish_proposal"><span class="id" title="definition">finish_proposal</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Containers.html#FMap.elements"><span class="id" title="abbreviation">FMap.elements</span></a> (<a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_state"><span class="id" title="definition">congress_state</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain8"><span class="id" title="definition">chain8</span></a>).(<a class="idref" href="SmartContracts.Congress.html#proposals"><span class="id" title="projection">proposals</span></a>)).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Balances&nbsp;before:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain7"><span class="id" title="definition">chain7</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_1"><span class="id" title="definition">congress_1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain7"><span class="id" title="definition">chain7</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_3"><span class="id" title="definition">person_3</span></a>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Balances&nbsp;after:&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain8"><span class="id" title="definition">chain8</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#congress_1"><span class="id" title="definition">congress_1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<a class="idref" href="SmartContracts.Blockchain.html#account_balance"><span class="id" title="projection">account_balance</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain8"><span class="id" title="definition">chain8</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#person_3"><span class="id" title="definition">person_3</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Print</span> <span class="id" title="keyword">Assumptions</span> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#chain8"><span class="id" title="definition">chain8</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#LocalBlockchainTests"><span class="id" title="section">LocalBlockchainTests</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">congress_txs_after_block</span> : <span class="id" title="var">core</span>.<br/>
<span class="comment">(*&nbsp;The&nbsp;congress&nbsp;satisfies&nbsp;a&nbsp;property&nbsp;specialized&nbsp;to&nbsp;the&nbsp;local&nbsp;blockchain&nbsp;DFS:&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a name="congress_txs_after_local_chain_block"><span class="id" title="lemma">congress_txs_after_local_chain_block</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prev</span> <span class="id" title="var">new</span> : <a class="idref" href="SmartContracts.LocalBlockchain.html#LocalChainBuilderDepthFirst"><span class="id" title="instance">LocalChainBuilderDepthFirst</span></a>) <span class="id" title="var">header</span> <span class="id" title="var">acts</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#prev"><span class="id" title="variable">prev</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#header"><span class="id" title="variable">header</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#acts"><span class="id" title="variable">acts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">addr</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#env_contracts"><span class="id" title="projection">env_contracts</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#addr"><span class="id" title="variable">addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="SmartContracts.Congress.html#contract"><span class="id" title="definition">Congress.contract</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#WeakContract"><span class="id" title="inductive">WeakContract</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#outgoing_txs"><span class="id" title="definition">outgoing_txs</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a>) <a class="idref" href="SmartContracts.LocalBlockchainTests.html#addr"><span class="id" title="variable">addr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#num_acts_created_in_proposals"><span class="id" title="definition">num_acts_created_in_proposals</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#incoming_txs"><span class="id" title="definition">incoming_txs</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a>) <a class="idref" href="SmartContracts.LocalBlockchainTests.html#addr"><span class="id" title="variable">addr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="comment">(*&nbsp;And&nbsp;of&nbsp;course,&nbsp;it&nbsp;is&nbsp;satisfied&nbsp;for&nbsp;the&nbsp;breadth&nbsp;first&nbsp;chain&nbsp;as&nbsp;well.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a name="congress_txs_after_local_chain_bf_block"><span class="id" title="lemma">congress_txs_after_local_chain_bf_block</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">prev</span> <span class="id" title="var">new</span> : <a class="idref" href="SmartContracts.LocalBlockchain.html#LocalChainBuilderBreadthFirst"><span class="id" title="definition">LocalChainBuilderBreadthFirst</span></a>) <span class="id" title="var">header</span> <span class="id" title="var">acts</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#prev"><span class="id" title="variable">prev</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#header"><span class="id" title="variable">header</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#acts"><span class="id" title="variable">acts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">addr</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Blockchain.html#env_contracts"><span class="id" title="projection">env_contracts</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#addr"><span class="id" title="variable">addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="SmartContracts.Congress.html#contract"><span class="id" title="definition">Congress.contract</span></a> : <a class="idref" href="SmartContracts.Blockchain.html#WeakContract"><span class="id" title="inductive">WeakContract</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#outgoing_txs"><span class="id" title="definition">outgoing_txs</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a>) <a class="idref" href="SmartContracts.LocalBlockchainTests.html#addr"><span class="id" title="variable">addr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="SmartContracts.Congress.html#num_acts_created_in_proposals"><span class="id" title="definition">num_acts_created_in_proposals</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#incoming_txs"><span class="id" title="definition">incoming_txs</span></a> (<a class="idref" href="SmartContracts.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="SmartContracts.LocalBlockchainTests.html#new"><span class="id" title="variable">new</span></a>) <a class="idref" href="SmartContracts.LocalBlockchainTests.html#addr"><span class="id" title="variable">addr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
